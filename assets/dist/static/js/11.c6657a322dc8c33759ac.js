webpackJsonp([11],{"1kfE":function(e,t){},"3XSo":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Xxa5"),n=a.n(s),o=a("exGp"),i=a.n(o),r=a("mvHQ"),l=a.n(r),h=a("iPNc"),c={name:"parameterSet",data:function(){return{showInfo:!0,showType:"",loadmore:!0,allPreset:null,nearPreset:null,loading1:!1,filePath:void 0,port:void 0,ip:void 0,userName:void 0,password:void 0,date:25,type:"ftp",roomId:void 0,logSaveDays:void 0,sbeforTime:void 0,ntpServerIp:void 0,classRoomList:[],host:"",scheduleSaveDays:void 0,recognFaceThresh:void 0,show:void 0,classoptions:[{camUrl:[],roomId:"4355",roomName:"考勤测试1"},{camUrl:[],roomId:"4356",roomName:"考勤测试2"},{camUrl:[],roomId:"4357",roomName:"考勤测试3"},{camUrl:[],roomId:"4358",roomName:"考勤测试1"}],listQuery:{classRoom:""},GetExcel:{},mode:localStorage.getItem("mode"),attendanceObj:{Enable:0,RealtimeReport:0,SleepTime:0,TeaThreshold:0,StuThreshold:0},classRoom:"",isBindList:[],initData:{},deviceRegisterType:""}},mounted:function(){this.getInitData()},methods:{presetSubmit:function(){var e=this;return this.allPreset&&(isNaN(parseInt(this.allPreset))||parseInt(this.allPreset)<0)?(this.$message.warning("预置位格式不正确，请输入大于0的数字"),!1):this.nearPreset&&(isNaN(parseInt(this.nearPreset))||parseInt(this.nearPreset)<0)?(this.$message.warning("预置位格式不正确，请输入大于0的数字"),!1):void this.$http.get(this.host+"/DealCameraPresetInfo.do?cmd=1&allPreset="+this.allPreset+"&nearPreset="+this.nearPreset+"&rand="+(new Date).getTime()).then(function(t){"0"===t.body&&e.$message("配置成功")}).catch(function(e){console.log(e)})},getPresetData:function(){var e=this;this.$http.get(this.host+"/DealCameraPresetInfo.do?cmd=0&rand="+(new Date).getTime()).then(function(t){e.allPreset=t.body.allPreset||"",e.nearPreset=t.body.nearPreset||""}).catch(function(e){console.log(e)})},UploadExcel:function(){var e=this;this.loading1=!0,this.$http.get(this.host+"/UploadExcel.do?rand="+(new Date).getTime()).then(function(t){e.loading1=!1,"0"===t.body&&e.$message("上传成功")}).catch(function(e){console.log(e)})},GetExcelFun:function(){var e=this;this.$http.get(this.host+"/GetExcel.do?rand="+(new Date).getTime()).then(function(t){e.GetExcel=t.body}).catch(function(e){console.log(e)})},SetUploadAddress:function(){var e=this;if(!this.isValidIP(this.ip))return this.$message("ip不合法"),!1;this.$http.get(this.host+"/SetUploadAddress.do?type="+this.type+"&date="+this.date+"&ip="+this.ip+"&port="+this.port+"&userName="+this.userName+"&password="+this.password+"&filePath="+this.filePath+"&rand="+(new Date).getTime()).then(function(t){0===parseInt(t.body)&&e.$message("设置成功")}).catch(function(e){console.log(e)})},handleDel:function(e){var t=this;this.classRoom=void 0;var a=[],s=e.classroomID.split("-")[0];a.push(s),this.$http.get(this.host+"/DelRoom.do?",{params:{roomId:l()(a),rand:(new Date).getTime()}}).then(function(e){0===parseInt(e.body)?t.$message("删除成功"):t.$message("删除失败")}).catch(function(e){console.log(e)}),this.classRoomList=[],setTimeout(function(){t.getClassroomList()},1e3)},getClassroomList:function(){var e=this;this.$http.get(this.host+"/GetAllRoomInfo.do?rand="+(new Date).getTime()).then(function(t){e.classRoomList=[],e.loading=!1,t.body.map(function(t,a){t.classroomID=t.roomId+"-"+t.roomName,e.classRoomList.push(t)})}).catch(function(e){console.log(e)})},getAllClass:function(){var e=this;this.$http.get(this.host+"/GetAllClassRoomID.do?rand="+(new Date).getTime()).then(function(t){e.classoptions=t.body}).catch(function(e){console.log(e)})},isValidIP:function(e){return/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(e)},getCookie:function(e){for(var t=e+"=",a=document.cookie.split(";"),s=0;s<a.length;s++){for(var n=a[s];" "===n.charAt(0);)n=n.substring(1);if(-1!==n.indexOf(t))return n.substring(t.length,n.length)}return""},GetConfigInfo:function(){var e=this;this.$http.get(this.host+"/GetConfigInfo.do?rand="+(new Date).getTime()).then(function(t){t.body&&(e.logSaveDays=t.body.logSaveDays,e.scheduleSaveDays=t.body.scheduleSaveDays,e.recognFaceThresh=t.body.recognFaceThresh,e.ntpServerIp=t.body.ntpServerIp,e.sbeforTime=t.body.sbeforTime)}).catch(function(e){console.log(e)})},GetUploadAddress:function(){var e=this;this.$http.get(this.host+"/GetUploadAddress.do?rand="+(new Date).getTime()).then(function(t){e.date=t.body.date,e.type=t.body.type,e.ip=t.body.ip,e.port=t.body.port,e.userName=t.body.userName,e.password=t.body.password,e.filePath=t.body.filePath}).catch(function(e){console.log(e)})},GetStartDate:function(){var e=this;this.$http.get(this.host+"/GetStartDate.do?rand="+(new Date).getTime()).then(function(t){0!==parseInt(t.body)&&(e.dateValue=parseInt(t.body))}).catch(function(e){console.log(e)})},SetLocalInfo:function(){var e=this;1==this.mode?this.$http.get(this.host+"/SetLocalInfo.do?logSaveDays="+this.logSaveDays+"&scheduleSaveDays="+this.scheduleSaveDays+"&recognFaceThresh="+this.recognFaceThresh+"&ntpServerIp="+this.ntpServerIp+"&sbeforTime="+this.sbeforTime+"&rand="+(new Date).getTime()).then(function(t){0===parseInt(t.body)?e.$message("配置成功!"):e.$message("配置失败!")}).catch(function(e){console.log(e)}):0==this.mode&&this.$http.get(this.host+"/SetLocalInfo.do?logSaveDays="+this.logSaveDays+"&scheduleSaveDays="+this.scheduleSaveDays+"&recognFaceThresh="+this.recognFaceThresh+"&ntpServerIp="+this.ntpServerIp+"&sbeforTime="+this.sbeforTime+"&rand="+(new Date).getTime()).then(function(t){0===parseInt(t.body)?e.$message("配置成功!"):e.$message("配置失败!")}).catch(function(e){console.log(e)})},getInitData:function(){var e=this;this.$https.get("/Camera_GetInit.do").then(function(t){if(t){e.initData=t,e.showType=t.DeviceName;var a=t.FaceEngine[0];e.deviceRegisterType=t.CloudAIRegister[0].CameraType,"Q34"==t.DeviceName&&(e.showInfo=!1),"V1700"==t.DeviceName&&(e.showInfo=!1),"HD810"==t.DeviceName&&1==t.CloudAIRegister[0].CameraType&&(e.showInfo=!1),"HD820"==t.DeviceName&&1==t.CloudAIRegister[0].CameraType&&(e.showInfo=!1),"HD600i"==t.DeviceName&&1==t.CloudAIRegister[0].CameraType&&(e.showInfo=!1),"AT2023"!=e.showType?0==e.deviceRegisterType?e.attendanceObj.TeaThreshold=a.TeaThreshold:e.attendanceObj.TeaThreshold=a.StuThreshold:(e.attendanceObj.TeaThreshold=a.TeaThreshold,e.attendanceObj.StuThreshold=a.StuThreshold),e.attendanceObj.Enable=a.Enable,e.attendanceObj.RealtimeReport=a.RealtimeReport,e.attendanceObj.SleepTime=a.SleepTime,console.log(e.deviceRegisterType),e.$nextTick(function(){e.getClassList()})}})},getClassList:function(){var e=this;this.$https.get("/Camera_GetCloudAIRoomList.do").then(function(t){if(t.data){var a=t.data.filter(function(t){return t.id==e.initData.RoomID});e.isBindList=a,e.classoptions=t.data}})},loadMore:function(){this.loadmore=!0},handleSave:function(){var e,t=this,a={RoomID:this.classRoom};this.$https.get("/Camera_BindRoom.do",a).then((e=i()(n.a.mark(function e(a){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=a){e.next=14;break}return t.$message.success("绑定成功!"),t.getInitData(),e.prev=3,e.next=6,t.$confirm("你确定要重启该设备吗?",{type:"warning"});case 6:if("confirm"==e.sent){e.next=9;break}return e.abrupt("return");case 9:t.reStart(),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(3);case 14:case"end":return e.stop()}},e,t,[[3,12]])})),function(t){return e.apply(this,arguments)}))},attendSubmit:function(){var e=this;if(!Object(h.c)(this.attendanceObj.SleepTime,5,120))return this.$message.error("输入正确的间隔时间"),!1;if("AT2323"!=this.showType){if(0==this.deviceRegisterType){if(this.attendanceObj.TeaThreshold=this.attendanceObj.TeaThreshold,!Object(h.c)(this.attendanceObj.TeaThreshold,35,55))return this.$message.error("输入正确的阈值"),!1}else if(this.attendanceObj.StuThreshold=this.attendanceObj.TeaThreshold,!Object(h.c)(this.attendanceObj.StuThreshold,35,55))return this.$message.error("输入正确的阈值"),!1}else this.attendanceObj.TeaThreshold=this.attendanceObj.TeaThreshold,this.attendanceObj.StuThreshold=this.attendanceObj.StuThreshold;var t={Enable:this.attendanceObj.Enable,RealtimeReport:this.attendanceObj.RealtimeReport,SleepTime:this.attendanceObj.SleepTime,TeaThreshold:this.attendanceObj.TeaThreshold,StuThreshold:this.attendanceObj.StuThreshold};console.log(t),this.$https.get("/Camera_SetFaceEngineInfo.do",t).then(function(t){1==t?e.$message.success("设置成功!"):e.$message.error("设置失败!")})},reStart:function(){var e=this;this.$https.get("/Camera_Restart.do").then(function(t){0==t?e.$message.success("设备重启成功!"):e.$message.error("设备重启失败!")})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"middle",staticStyle:{width:"100%"}},[a("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:e.$route.meta.title,expression:"$route.meta.title"}]}),e._v(" "),a("div",["AI5100"!=e.showType?a("div",{staticClass:"module"},[e._m(0),e._v(" "),a("div",[a("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:e.loadMore,expression:"loadMore"}],staticStyle:{width:"200px","border-radius":"0"},attrs:{size:"mini",filterable:"",placeholder:"请选择"},model:{value:e.classRoom,callback:function(t){e.classRoom=t},expression:"classRoom"}},[e._l(e.classoptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}},[e._v(e._s(t.name))])}),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("svg",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{width:"30px",height:"30px",viewBox:"0 0 40 40","enable-background":"new 0 0 40 40"}},[a("path",{attrs:{opacity:"0.2",fill:"#57AAFF",d:"M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946\n    s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634\n    c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"}}),e._v(" "),a("path",{attrs:{fill:"#57AAFF",d:"M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0\n    C22.32,8.481,24.301,9.057,26.013,10.047z",transform:"rotate(42.1171 20 20)"}},[a("animateTransform",{attrs:{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"0.9s",repeatCount:"indefinite"}})],1)])])],2),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleSave}},[e._v("确定")]),e._v(" "),a("span",{staticStyle:{color:"red",clear:"left","text-align":"center",margin:"20px 0"}},[e._v("\n          提示：重启生效\n        ")])],1),e._v(" "),a("div",{staticClass:"roomClass",staticStyle:{width:"100%"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.isBindList}},[a("el-table-column",{attrs:{label:"教室ID-教室名称",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id)+"--"+e._s(t.row.name))])]}}],null,!1,1573366465)}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:""}},[[a("div",[e._v("已绑定")])]],2)],1)],1)]):e._e(),e._v(" "),e.showInfo?a("div",{staticClass:"module",staticStyle:{"margin-bottom":"0"}},[e._m(1),e._v(" "),a("div",[a("div",[a("span",{staticClass:"parName"},[e._v("是否启用：")]),e._v(" "),a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.attendanceObj.Enable,callback:function(t){e.$set(e.attendanceObj,"Enable",t)},expression:"attendanceObj.Enable"}},[e._v("启用")])],1),e._v(" "),e._e(),e._v(" "),a("div",[a("span",{staticClass:"parName"},[e._v("考勤间隔时间：")]),e._v(" "),a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"1-120",size:"small",min:1,max:120,type:"number"},model:{value:e.attendanceObj.SleepTime,callback:function(t){e.$set(e.attendanceObj,"SleepTime",t)},expression:"attendanceObj.SleepTime"}}),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v("5s - 120s")])],1),e._v(" "),a("div",[a("span",{staticClass:"parName"},[e._v("\n            "+e._s("AT2023"==e.showType?"老师阈值：":"考勤阈值：")+"\n          ")]),e._v(" "),a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入",maxlength:"3"},model:{value:e.attendanceObj.TeaThreshold,callback:function(t){e.$set(e.attendanceObj,"TeaThreshold",t)},expression:"attendanceObj.TeaThreshold"}}),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v("35 - 55")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"AT2023"==e.showType,expression:"showType == 'AT2023'"}]},[a("span",{staticClass:"parName"},[e._v("学生阈值：")]),e._v(" "),a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入",maxlength:"3"},model:{value:e.attendanceObj.StuThreshold,callback:function(t){e.$set(e.attendanceObj,"StuThreshold",t)},expression:"attendanceObj.StuThreshold"}}),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v("0 - 100")])],1)]),e._v(" "),a("div",{staticClass:"btnBox"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.attendSubmit}},[e._v("提交")])],1)]):e._e()])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h4",[t("span"),this._v("教室配置")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",[t("span"),this._v("考勤信息")])}]};var m=a("VU/8")(c,d,!1,function(e){a("ZSk9"),a("1kfE")},"data-v-52a7d2ac",null);t.default=m.exports},ZSk9:function(e,t){}});