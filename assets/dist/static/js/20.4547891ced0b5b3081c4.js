webpackJsonp([20],{"50bi":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),o=a.n(n),i=a("exGp"),s=a.n(i),r={name:"logManage",data:function(){return{host:"",Page:1,logList:[],loading:!1,multipleSelection:[],days:0}},created:function(){this.getInit()},mounted:function(){this.getList()},methods:{getList:function(){var t=this;this.$https.get("/Camera_GetLogListInfo.do").then(function(e){e.Data&&(t.logList=e.Data.reverse())})},uploadLog:function(t){var e=this;return s()(o.a.mark(function a(){var n,i,s,r,l,c,d,u,h,v;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.location.hostname,i=window.location.protocol,s="8000",r=t.split("Camera")[1],l=i+"//"+n+":"+s+"/"+r,console.log(l,"url"),e.prev=6,e.next=9,fetch(l);case 9:if((c=e.sent).ok){e.next=12;break}throw new Error("HTTP error! status: "+c.status);case 12:return e.next=14,c.blob();case 14:d=e.sent,u=window.URL.createObjectURL(d),(h=document.createElement("a")).style.display="none",h.href=u,v=r.split("/").pop()||"download.log",h.download=v,document.body.appendChild(h),h.click(),window.URL.revokeObjectURL(u),document.body.removeChild(h),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(6),console.error("下载失败:",e.t0),alert("下载失败，请稍后重试。");case 31:case"end":return e.stop()}},a,e,[[6,27]])}))()},submitDay:function(){var t=this,e={Value:this.days};this.$https.get("/Camera_SetDataDay.do",e).then(function(e){1==e?t.$message.success("修改成功!"):t.$message.error("修改失败!")})},getInit:function(){var t=this;this.$https.get("/Camera_GetInit.do").then(function(e){t.days=e.DataSaveDay})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"middle",staticStyle:{width:"100%"}},[a("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:t.$route.meta.title,expression:"$route.meta.title"}]}),t._v(" "),a("div",{staticClass:"module",staticStyle:{"margin-bottom":"0","min-height":"600px"}},[t._m(0),t._v(" "),a("div",{staticClass:"headBox"},[a("span",{},[t._v("数据保存天数：")]),t._v(" "),a("el-input",{staticStyle:{width:"220px"},attrs:{maxlength:"3",size:"small"},model:{value:t.days,callback:function(e){t.days=e},expression:"days"}}),t._v("\n      天\n      "),a("span",{staticClass:"hint"},[t._v("*日志文件与分析数据的保存天数")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitDay}},[t._v("提交")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.logList,border:""}},[a("el-table-column",{attrs:{prop:"Path",label:"日志名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("\n            "+t._s(e.row.Path.split("Log/")[1])+"\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"日志操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-download",staticStyle:{color:"#5cb6ff"}}),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.uploadLog(e.row.Path)}}},[t._v("下载")])]}}])})],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h4",[e("span"),this._v("日志管理")])}]};var c=a("VU/8")(r,l,!1,function(t){a("Jkgf")},"data-v-260c48f2",null);e.default=c.exports},Jkgf:function(t,e){}});