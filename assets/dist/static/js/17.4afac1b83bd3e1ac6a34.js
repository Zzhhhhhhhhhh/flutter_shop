webpackJsonp([17],{NgBd:function(i,t){},zFck:function(i,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("mvHQ"),n=e.n(a),s=e("2nSH"),r=(e("zL8q"),{name:"behaviorAnalysis",data:function(){return{dialogPic:!1,detailObj:{imgpath:"",time:"",name:""},isflag:!1,loading:!0,imgListshow:!1,behavior:5,host:"",index2:void 0,imgList:[{img:"../../../static/img/img1.png",time:"09:00:00"},{img:"../../../static/img/img1.png",time:"09:00:00"},{img:"../../../static/img/img1.png",time:"09:00:00"},{img:"../../../static/img/img1.png",time:"09:00:00"},{img:"../../../static/img/img1.png",time:"09:00:00"},{img:"../../../static/img/img1.png",time:"09:00:00"}],frontAllSeat:void 0,formInline:{data:void 0,beginTimeH:"8",beginTimeS:"0",endTimeH:"10",endTimeS:"59"},dilog:!1,xuanxianglist:[{value:"举手"},{value:"站立"},{value:"趴桌"},{value:"向后看"},{value:"玩手机"}],index1:0,allCount:0,show:"",sum:"76%",xdata:["2017-03-04 09:02:00","2017-03-04 09:04:00","2017-03-04 09:06:00","2017-03-04 09:08:00","2017-03-04 09:10:00","2017-03-04 09:12:00","2017-03-04 09:14:00"],img:[],taitouY:[1,2,3,4,5,6,7],chuqinY:[7,6,5,4,3,2,1],listQuery:{data:void 0,beginTime:void 0,endtIME:void 0},dataList:[{value:20,name:"听讲"},{value:0,name:"站立"},{value:0,name:"趴桌"},{value:0,name:"举手"}],listprop:{type:2,title:"行为分析统计"},roundList:{tingjiang:0,jushou:0,zhanli:0,pazhuo:0,xianghoukan:0,wanshouji:0},zhanliArr:[],xianghouArr:[],jushouArr:[],tangArr:[],wanshoujiArr:[],tingArr:[],imgListArr:[],total:0,queryObj:{startTime:"",endTime:""},behaviorData:[]}},mounted:function(){this.getNowTime(),this.getList(),this.getImg()},methods:{handleJump:function(){this.dilog=!0},handleIndex:function(i){this.index1=i,this.imgList=[],this.imgListshow=!1,0==i?this.imgListArr=this.jushouArr:1==i?this.imgListArr=this.zhanliArr:2==i?this.imgListArr=this.tangArr:3==i?this.imgListArr=this.xianghouArr:4==i&&(this.imgListArr=this.wanshoujiArr)},drawLine:function(){this.$echarts.init(document.getElementById("myChart")).setOption({title:{},tooltip:{show:!0,trigger:"item",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},formatter:"{b} : {c} ({d}%)"},color:["#048ded","green","#f25520","#111ee9","#edc11a","#14e9d7"],series:[{type:"pie",radius:"60%",label:{normal:{show:!0,position:"outer",formatter:"{a_set|{b},{d}%}\n",borderWidth:20,borderRadius:4,padding:[90,-50],rich:{a_set:{color:"#1a1a1a",lineHeight:20,align:"center"},c_set:{color:"#808080"}}},emphasis:{show:!0}},labelLine:{normal:{show:!0,length:30,length2:50}},data:this.behaviorData,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})},getList:function(){},getImg:function(){},handleSearch:function(){var i=void 0,t=void 0,e=void 0,a=void 0;this.formInline.beginTimeH>=0&&(i=this.formInline.beginTimeH<10?"0"+this.formInline.beginTimeH:this.formInline.beginTimeH),this.formInline.beginTimeS>=0&&(t=this.formInline.beginTimeS<10?"0"+this.formInline.beginTimeS:this.formInline.beginTimeS),this.formInline.endTimeH>=0&&(e=this.formInline.endTimeH<10?"0"+this.formInline.endTimeH:this.formInline.endTimeH),this.formInline.endTimeS>=0&&(a=this.formInline.endTimeS<10?"0"+this.formInline.endTimeS:this.formInline.endTimeS),this.listQuery.beginTime=i+":"+t+":00",this.listQuery.endTime=e+":"+a+":59",this.listQuery.data=this.formInline.data,this.getList(),this.getImg()},getNowTime:function(){var i=new Date,t=i.getFullYear(),e=i.getMonth(),a=i.getDate();e=(e+=1).toString().padStart(2,"0"),a=a.toString().padStart(2,"0");var n={};return n.defaultDate=t+"-"+e+"-"+a,n.h=i.getHours(),n.m=i.getMinutes(),this.$set(this.formInline,"data",n.defaultDate),this.$set(this.formInline,"endTimeH",n.h),this.$set(this.formInline,"endTimeS",n.m),0==n.h?this.$set(this.formInline,"beginTimeH","22"):1==n.h?this.$set(this.formInline,"beginTimeH","23"):2==n.h?this.$set(this.formInline,"beginTimeH","00"):this.$set(this.formInline,"beginTimeH",parseInt(n.h)-2),this.$set(this.formInline,"beginTimeS",n.m),n},lookVideoGo:function(i){window.open(i)},getAiData:function(i){var t=this,e=JSON.parse(n()(i));e.StartTime=e.StartTime.split(":")[0]-0,e.EndTime=e.EndTime.split(":")[0]-0,this.$https.get("/Camera_GetAIData.do",e).then(function(i){i.Data?t.randerHtml(i.Data):t.getJson(i)})},imgClick:function(i){this.dialogPic=!0,this.detailObj.imgpath=i.imgpath,this.detailObj.time=i.time,""!=i.name?this.detailObj.name=i.name:this.detailObj.name="未识别"},echartArr:function(){dataList.filter(function(i){return 1==i.Type})},queryHandle:function(i){this.index1=0,this.imgListArr=[],this.zhanliArr=[],this.xianghouArr=[],this.jushouArr=[],this.tangArr=[],this.wanshoujiArr=[],this.tingArr=[],this.queryObj.startTime=i.StartTime.split(":")[0],this.queryObj.endTime=i.EndTime.split(":")[0],this.getAiData(i)},getJson:function(i){var t=this;if(""!=i.length){var e=window.location.hostname;this.$https.get(window.location.protocol+"//"+e+":8000/"+i.split("Camera/")[1]).then(function(i){var e=t.queryObj.startTime,a=t.queryObj.endTime,n=i.Data.filter(function(i){var t=i.DateTime.split(" ")[1].split(":")[0];return t>=e&&t<a});t.randerHtml(n)})}},randerHtml:function(i){var t=this;this.arr=i;var e=window.location.hostname;i.forEach(function(i){if(1==i.Type){t.roundList.zhanli++;var a={};a.imgpath=window.location.protocol+"//"+e+":8000"+i.SavePath.split("Camera")[1].replace(/\//g,"/")+"/"+i.SaveFileName,a.name=i.UserName,a.time=i.DateTime,t.zhanliArr.push(a)}else if(2==i.Type){t.roundList.xianghoukan++;var n={};n.imgpath=window.location.protocol+"//"+e+":8000"+i.SavePath.split("Camera")[1].replace(/\//g,"/")+"/"+i.SaveFileName,n.name=i.UserName,n.time=i.DateTime,t.xianghouArr.push(n)}else if(3==i.Type){t.roundList.jushou++;var s={};s.imgpath=window.location.protocol+"//"+e+":8000"+i.SavePath.split("Camera")[1].replace(/\//g,"/")+"/"+i.SaveFileName,s.name=i.UserName,s.time=i.DateTime,t.jushouArr.push(s)}else if(4==i.Type){t.roundList.pazhuo++;var r={};r.imgpath=window.location.protocol+"//"+e+":8000"+i.SavePath.split("Camera")[1].replace(/\//g,"/")+"/"+i.SaveFileName,r.name=i.UserName,r.time=i.DateTime,t.tangArr.push(r)}else if(5==i.Type){t.roundList.tingjiang++;var o={};o.imgpath=window.location.protocol+"//"+e+":8000"+i.SavePath.split("Camera")[1].replace(/\//g,"/")+"/"+i.SaveFileName,o.name=i.UserName,o.time=i.DateTime,t.tingArr.push(o)}else if(13==i.Type){t.roundList.wanshouji++;var m={};m.imgpath=window.location.protocol+"//"+e+":8000"+i.SavePath.split("Camera")[1].replace(/\//g,"/")+"/"+i.SaveFileName,m.name=i.UserName,m.time=i.DateTime,t.wanshoujiArr.push(m)}}),"Q41"==sessionStorage.getItem("showType")?("玩手机"==this.xuanxianglist[this.xuanxianglist.length-1].value&&this.xuanxianglist.pop(),this.behaviorData=[{name:"向后看",value:this.roundList.xianghoukan},{name:"趴桌",value:this.roundList.pazhuo},{name:"举手",value:this.roundList.jushou},{name:"站立",value:this.roundList.zhanli}]):this.behaviorData=[{name:"向后看",value:this.roundList.xianghoukan},{name:"趴桌",value:this.roundList.pazhuo},{name:"举手",value:this.roundList.jushou},{name:"站立",value:this.roundList.zhanli},{name:"玩手机",value:this.roundList.wanshouji}],this.drawLine(),this.imgListArr=this.jushouArr}},components:{QueryHead:s.a}}),o={render:function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{ref:"middle",staticStyle:{width:"100%"}},[e("query-head",{attrs:{listprop:i.listprop},on:{queryHandle:i.queryHandle}}),i._v(" "),e("el-row",{staticStyle:{"margin-top":"10px"}},[e("div",{staticClass:"xingwei"},[e("div",{staticClass:"xingweiitem"},[e("div",{style:{width:"100%",height:"300px"},attrs:{id:"myChart"}})]),i._v(" "),e("div",{staticClass:"xingweiitem"},[e("div",{staticClass:"xuanxiangka"},[e("div",{staticClass:"title"},[e("p",[i._v("行为抓拍")])]),i._v(" "),e("ul",{staticClass:"daohang"},i._l(i.xuanxianglist,function(t,a){return e("li",{key:a,on:{click:function(t){return i.handleIndex(a)}}},[e("span",{class:{active:Number(i.index1)===a}},[i._v(i._s(t.value))])])}),0)]),i._v(" "),e("div",{staticClass:"daohangbody"},[e("div",{staticClass:"main"},[i._l(i.imgListArr,function(t,a){return e("div",{key:a,staticClass:"item"},[e("img",{attrs:{src:t.imgpath,alt:""},on:{click:function(e){return i.imgClick(t)}}}),i._v(" "),e("p",[i._v(i._s(t.name))]),i._v(" "),e("p",[i._v(i._s(t.time.split(" ")[1]))])])}),i._v(" "),i.imgListshow?e("div",{staticClass:"item",staticStyle:{"text-align":"center"}},[e("span",{staticStyle:{"line-height":"135px","font-size":"14px",color:"#048ded",cursor:"pointer"},on:{click:i.handleJump}},[i._v("更多……")])]):i._e(),i._v(" "),e("div",{staticClass:"clear"})],2)])])])]),i._v(" "),i.dilog?e("div",{staticClass:"tanchuang"},[e("cap-ture",{attrs:{suoyin:{index:i.index1,date:i.formInline.data,star:i.listQuery.beginTime,end:i.listQuery.endTime,beginTimeH:i.formInline.beginTimeH,beginTimeS:i.formInline.beginTimeS,endTimeH:i.formInline.endTimeH,endTimeS:i.formInline.endTimeS}}}),i._v(" "),e("div",{staticStyle:{position:"absolute",bottom:"10px",width:"1200px"}},[e("el-button",{staticStyle:{display:"block",margin:"0 auto"},attrs:{size:"mini"},on:{click:function(t){i.dilog=!1}}},[i._v("返回")])],1)],1):i._e(),i._v(" "),e("el-dialog",{attrs:{title:"查看图片",visible:i.dialogPic},on:{"update:visible":function(t){i.dialogPic=t}}},[e("img",{staticStyle:{margin:"0 auto",display:"block",height:"500px"},attrs:{src:i.detailObj.imgpath,alt:""}}),i._v(" "),e("p",[i._v("姓名："+i._s(i.detailObj.name))]),i._v(" "),e("p",[i._v("时间："+i._s(i.detailObj.time))])])],1)},staticRenderFns:[]};var m=e("VU/8")(r,o,!1,function(i){e("NgBd")},"data-v-ba0b2a48",null);t.default=m.exports}});